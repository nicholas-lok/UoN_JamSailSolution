\doxysection{Li2.\+h}
\hypertarget{_li2_8h_source}{}\label{_li2_8h_source}\index{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/ttc/li2/Li2.h@{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/ttc/li2/Li2.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{00001\ \textcolor{comment}{/*****************************************************************/}}
\DoxyCodeLine{00008\ \textcolor{preprocessor}{\#ifndef\ LI2\_H\_INCLUDED}}
\DoxyCodeLine{00009\ \textcolor{preprocessor}{\#define\ LI2\_H\_INCLUDED}}
\DoxyCodeLine{00010\ }
\DoxyCodeLine{00012\ \textcolor{preprocessor}{\#include\ <stdbool.h>}}
\DoxyCodeLine{00013\ \textcolor{preprocessor}{\#include\ <string.h>}}
\DoxyCodeLine{00014\ \textcolor{preprocessor}{\#include\ <stdlib.h>}}
\DoxyCodeLine{00015\ }
\DoxyCodeLine{00017\ \textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{_li2___structs_8h}{Li2\_Structs.h}}"{}}}
\DoxyCodeLine{00018\ }
\DoxyCodeLine{00019\ \textcolor{preprocessor}{\#ifdef\ SEG\_GROUND\ \ \ \ \ \ \ }}
\DoxyCodeLine{00020\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}Li2\_Serial\_Ground.h"{}}\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ }
\DoxyCodeLine{00021\ \textcolor{preprocessor}{\#elif\ SEG\_SPACE\ \ \ \ \ \ \ \ \ }}
\DoxyCodeLine{00022\ \textcolor{preprocessor}{\ \ \ \ \#include\ "{}\mbox{\hyperlink{_li2___serial___space_8h}{Li2\_Serial\_Space.h}}"{}}}
\DoxyCodeLine{00023\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{00024\ \textcolor{preprocessor}{\ \ \ \ \#error\ "{}Li2:\ No\ Preprocessor\ Macros\ Specified\ for\ Segment!"{}}}
\DoxyCodeLine{00025\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{00026\ }
\DoxyCodeLine{00027\ }
\DoxyCodeLine{00029\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_SYNC\_0\ \ \ \ \ \ \ \ \ \ \ \ \ \ 'H'}}
\DoxyCodeLine{00030\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_SYNC\_1\ \ \ \ \ \ \ \ \ \ \ \ \ \ 'e'}}
\DoxyCodeLine{00031\ }
\DoxyCodeLine{00033\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_I\_DIR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x10\ \ \ \ }}
\DoxyCodeLine{00034\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_O\_DIR\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x20\ \ \ \ }}
\DoxyCodeLine{00037\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_ACK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x0A0A}}
\DoxyCodeLine{00038\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_NACK\ \ \ \ \ \ \ \ \ \ \ \ \ \ \ \ 0x0FFF}}
\DoxyCodeLine{00039\ }
\DoxyCodeLine{00041\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_MAX\_FULL\_TX\_LEN\ \ \ \ \ 281\ \ \ \ \ }}
\DoxyCodeLine{00042\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_SYNC\_LEN\ \ \ \ \ \ \ \ \ \ \ \ 2}}
\DoxyCodeLine{00043\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_HEADER\_LEN\ \ \ \ \ \ \ \ \ \ 8}}
\DoxyCodeLine{00044\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_MAX\_AX\_PAYLOAD\_LEN\ \ 273\ \ \ \ \ }}
\DoxyCodeLine{00045\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_MAX\_PAYLOAD\_LEN\ \ \ \ \ 255}}
\DoxyCodeLine{00046\ \textcolor{preprocessor}{\#define\ LI2\_CDI\_CHCKSUM\_LEN\ \ \ \ \ \ \ \ \ 2}}
\DoxyCodeLine{00047\ }
\DoxyCodeLine{00049\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{enum}\ \{}
\DoxyCodeLine{00050\ \ \ \ \ LI2\_OK,}
\DoxyCodeLine{00051\ \ \ \ \ LI2\_ERR\_SERIAL\_FAIL,}
\DoxyCodeLine{00052\ \ \ \ \ LI2\_ERR\_WRONG\_CMD,}
\DoxyCodeLine{00053\ \ \ \ \ LI2\_ERR\_INVALID\_CDI\_CMD\_USAGE,}
\DoxyCodeLine{00054\ \ \ \ \ LI2\_ERR\_INVALID\_HEADER,}
\DoxyCodeLine{00055\ \ \ \ \ LI2\_ERR\_INVALID\_HEADER\_CKSUM,}
\DoxyCodeLine{00056\ \ \ \ \ LI2\_ERR\_INVALID\_PAYLOAD\_CKSUM,}
\DoxyCodeLine{00057\ \ \ \ \ LI2\_ERR\_MISSING\_BYTES,}
\DoxyCodeLine{00058\ \ \ \ \ LI2\_ERR\_NACK,}
\DoxyCodeLine{00059\ \ \ \ \ LI2\_ERR\_OUT\_OF\_SYNC,}
\DoxyCodeLine{00060\ \ \ \ \ LI2\_ERR\_NO\_RESPONSE}
\DoxyCodeLine{00061\ \}\ LI2\_RTNS;}
\DoxyCodeLine{00062\ }
\DoxyCodeLine{00064\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00065\ \ \ \ \ \textcolor{keywordtype}{bool}\ debugFlag;}
\DoxyCodeLine{00066\ \ \ \ \ \textcolor{keywordtype}{bool}\ buffDebugFlag;}
\DoxyCodeLine{00067\ \ \ \ \ \textcolor{keywordtype}{bool}\ emulatorFlag;}
\DoxyCodeLine{00068\ \ \ \ \ \textcolor{keywordtype}{bool}\ beaconStatus;}
\DoxyCodeLine{00069\ \ \ \ \ uint8\_t\ beaconInterval;}
\DoxyCodeLine{00070\ \}\ \mbox{\hyperlink{struct_l_i2___s_e_t_u_p}{LI2\_SETUP}};}
\DoxyCodeLine{00071\ }
\DoxyCodeLine{00073\ \textcolor{keyword}{typedef}\ \textcolor{keyword}{struct\ }\{}
\DoxyCodeLine{00075\ \ \ \ \ \textcolor{keywordtype}{float}\ \mbox{\hyperlink{struct_li2___radio_a66a261bf635f7cf1a0a837b1f958346f}{firmRev}};}
\DoxyCodeLine{00076\ \ \ \ \ uint8\_t\ powerAmpLevel;}
\DoxyCodeLine{00077\ \ \ \ \ uint8\_t\ functionConfig;}
\DoxyCodeLine{00078\ \ \ \ \ uint8\_t\ functionConfig2;}
\DoxyCodeLine{00079\ \ \ \ \ \mbox{\hyperlink{struct_l_i2___s_e_t_u_p}{LI2\_SETUP}}\ setup;}
\DoxyCodeLine{00080\ }
\DoxyCodeLine{00082\ \ \ \ \ \mbox{\hyperlink{structsp__port}{Serial\_Port}}\ *\mbox{\hyperlink{struct_li2___radio_a62d12b41a365c377c9434dc9bdb9ade2}{SerialPort}};}
\DoxyCodeLine{00083\ \ \ \ \ uint8\_t\ bufferIn[LI2\_CDI\_MAX\_FULL\_TX\_LEN];}
\DoxyCodeLine{00084\ \ \ \ \ uint8\_t\ bufferOut[LI2\_CDI\_MAX\_FULL\_TX\_LEN];}
\DoxyCodeLine{00085\ }
\DoxyCodeLine{00087\ \ \ \ \ \mbox{\hyperlink{struct_li2___t_x_r_x___config}{Li2\_TXRX\_Config}}\ \mbox{\hyperlink{struct_li2___radio_a23fd74d92e88009875fe6a514b502221}{TXRXConfig}};}
\DoxyCodeLine{00088\ \ \ \ \ \mbox{\hyperlink{struct_li2___r_f___config}{Li2\_RF\_Config}}\ RFConfig;}
\DoxyCodeLine{00089\ \ \ \ \ \mbox{\hyperlink{struct_li2___beacon___config}{Li2\_Beacon\_Config}}\ BeaconConfig;}
\DoxyCodeLine{00090\ }
\DoxyCodeLine{00092\ \ \ \ \ \mbox{\hyperlink{struct_li2___telemetry___packet}{Li2\_Telemetry\_Packet}}\ \mbox{\hyperlink{struct_li2___radio_a295224a10fc7026a43df1a3380ad4227}{Telem}};}
\DoxyCodeLine{00093\ \ \ \ \ \mbox{\hyperlink{struct_li2___a_x25___header}{Li2\_AX25\_Header}}\ AX25Header;}
\DoxyCodeLine{00094\ \ \ \ \ \mbox{\hyperlink{struct_li2___r_t_c___packet}{Li2\_RTC\_Packet}}\ RTC;}
\DoxyCodeLine{00095\ \ \ \ \ \mbox{\hyperlink{struct_li2___u_a_r_t___status___bits}{Li2\_UART\_Status\_Bits}}\ UARTStatusBits;}
\DoxyCodeLine{00096\ \}\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}};}
\DoxyCodeLine{00097\ }
\DoxyCodeLine{00108\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_ad9f42688c249843c8501adb3746e8895}{Li2\_Init}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *serialPortName,\ uint32\_t\ serialBaudRate,\ \mbox{\hyperlink{struct_l_i2___s_e_t_u_p}{LI2\_SETUP}}\ setup\ );}
\DoxyCodeLine{00109\ }
\DoxyCodeLine{00117\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a36f033fd74c724e2009348f975f4aeb5}{Li2\_TXDataPacket}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ uint8\_t\ *dataTX,\ uint8\_t\ len\ );}
\DoxyCodeLine{00118\ }
\DoxyCodeLine{00125\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_aead9fb354bc33fcf1a8493766bdb5065}{Li2\_RXDataPacket}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ uint8\_t\ *dataRX\ );}
\DoxyCodeLine{00126\ }
\DoxyCodeLine{00134\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a180168c8e4ecb05042e2b73d90d73416}{Li2\_NoOp}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}}\ );}
\DoxyCodeLine{00135\ }
\DoxyCodeLine{00141\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a88f6480ba2814cf2f355d7b55c6b9e1b}{Li2\_Reset}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}}\ );}
\DoxyCodeLine{00142\ }
\DoxyCodeLine{00148\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a2feb9a6591e84cf2728edddeb8948657}{Li2\_GetTXRXConfig}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}}\ );}
\DoxyCodeLine{00149\ }
\DoxyCodeLine{00155\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a208576c0a7442ffe99df8a3245970ba0}{Li2\_GetTelemetry}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}}\ );}
\DoxyCodeLine{00156\ }
\DoxyCodeLine{00160\ LI2\_RTNS\ Li2\_GetFirmRev(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}}\ );}
\DoxyCodeLine{00161\ }
\DoxyCodeLine{00162\ LI2\_RTNS\ Li2\_SetTXRXConfig(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___t_x_r_x___config}{Li2\_TXRX\_Config}}\ *TXRXConfig\ );}
\DoxyCodeLine{00163\ LI2\_RTNS\ Li2\_SetRFConfig(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___r_f___config}{Li2\_RF\_Config}}\ *RFConfig\ );}
\DoxyCodeLine{00164\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a3ca4b310670c15340c72961fa4636ed3}{Li2\_SetBeaconConfig}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___beacon___config}{Li2\_Beacon\_Config}}\ *BeaconConfig\ );}
\DoxyCodeLine{00165\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a3cfa68841505be8cc2b0f522ffdb2632}{Li2\_SetBeaconData}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ uint8\_t\ *data,\ uint8\_t\ len\ );}
\DoxyCodeLine{00166\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a71134b173451452d4f533ea3706230b4}{LI2\_SetPowerAmp}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \textcolor{keyword}{const}\ uint8\_t\ power\ );}
\DoxyCodeLine{00167\ }
\DoxyCodeLine{00168\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a14059840899cdfd5653300873f387918}{Li2\_SendCDICmd}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ cmd,\ \textcolor{keyword}{const}\ uint8\_t\ *payload,\ uint16\_t\ payloadLen\ );}
\DoxyCodeLine{00169\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a3c6581bcf38772549a279946b04789e5}{Li2\_ReceiveCDICmd}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ expectCmd\ );}
\DoxyCodeLine{00170\ }
\DoxyCodeLine{00178\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a3d319bf681071efa1a1bb1ee5969d1dc}{Li2\_ReadHeader}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ uint8\_t\ *bufferRX,\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ expectCmd\ );}
\DoxyCodeLine{00179\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_aaab071f071f9d3fb44b3b2b0f58028df}{Li2\_ReadPayload}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ uint8\_t\ *bufferRX,\ uint16\_t\ payloadLen\ );}
\DoxyCodeLine{00180\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_af36e2a550fcd23cdbd7d2a65fa71319f}{Li2\_CheckPayloadSize}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ uint8\_t\ dir,\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ cmd,\ uint16\_t\ payloadSize\ );}
\DoxyCodeLine{00181\ }
\DoxyCodeLine{00182\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a5809a00c174811dbe6ba421da63ea829}{Li2\_RawWrite}}(\ \mbox{\hyperlink{structsp__port}{Serial\_Port}}\ *SerialPort,\ \textcolor{keyword}{const}\ uint8\_t\ *dataTX,\ uint16\_t\ len\ );}
\DoxyCodeLine{00183\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_a705d571fe73500b1c7a58820048ae155}{Li2\_RawRead}}(\ \mbox{\hyperlink{structsp__port}{Serial\_Port}}\ *SerialPort,\ uint8\_t\ *dataRX,\ uint16\_t\ len\ );}
\DoxyCodeLine{00184\ }
\DoxyCodeLine{00185\ LI2\_RTNS\ \mbox{\hyperlink{_li2_8c_abb716478e2a2b07a59ecd9b4376b730d}{Li2\_SendCDIAck}}(\ \mbox{\hyperlink{struct_li2___radio}{Li2\_Radio}}\ *\mbox{\hyperlink{namespace_li2}{Li2}},\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ cmd,\ uint8\_t\ ackStatus\ );}
\DoxyCodeLine{00186\ }
\DoxyCodeLine{00187\ \textcolor{keywordtype}{void}\ Li2\_CalcCDIChecksums(\ uint8\_t\ *checksums,\ \textcolor{keyword}{const}\ uint8\_t\ *data,\ uint16\_t\ len\ );}
\DoxyCodeLine{00188\ }
\DoxyCodeLine{00189\ \textcolor{keywordtype}{void}\ Li2\_AX25Decode(\ \mbox{\hyperlink{struct_li2___a_x25___header}{Li2\_AX25\_Header}}\ *AX25Header,\ \textcolor{keyword}{const}\ uint8\_t\ *data\ );}
\DoxyCodeLine{00190\ \textcolor{keywordtype}{void}\ Li2\_PrintBuffer(\ \textcolor{keyword}{const}\ uint8\_t*\ buffer,\ uint16\_t\ len,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *bufferName\ );}
\DoxyCodeLine{00191\ \textcolor{keywordtype}{void}\ Li2\_PrintTelem(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___telemetry___packet}{Li2\_Telemetry\_Packet}}\ *Telem\ );}
\DoxyCodeLine{00192\ \textcolor{keywordtype}{void}\ Li2\_PrintTXRXConfig(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___t_x_r_x___config}{Li2\_TXRX\_Config}}\ *TXRXConfig\ );}
\DoxyCodeLine{00193\ \textcolor{keywordtype}{void}\ Li2\_PrintUARTStatusBits(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___u_a_r_t___status___bits}{Li2\_UART\_Status\_Bits}}\ *UARTStatusBits\ );}
\DoxyCodeLine{00194\ \textcolor{keywordtype}{void}\ Li2\_PrintAX25Header(\ \textcolor{keyword}{const}\ \mbox{\hyperlink{struct_li2___a_x25___header}{Li2\_AX25\_Header}}\ *AX25Header\ );}
\DoxyCodeLine{00195\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *Li2\_GetCDIStr(\ \mbox{\hyperlink{_li2___structs_8h_a4ea2346b8b3d19900d819b40e58a9572}{LI2\_CDI\_CMDS}}\ cmd\ );}
\DoxyCodeLine{00196\ }
\DoxyCodeLine{00197\ uint8\_t\ \mbox{\hyperlink{_li2_8c_af835c8f23d71619006eb7ee4e89c329f}{Li2\_Rtn}}(\ LI2\_RTNS\ returnCode,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *func,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}\ *caller\ );}
\DoxyCodeLine{00198\ \ \textcolor{comment}{//\ end\ of\ Li2CDIFunc}}
\DoxyCodeLine{00199\ }
\DoxyCodeLine{00200\ \textcolor{preprocessor}{\#endif\ }\textcolor{comment}{//\ LI2\_H\_INCLUDED}}

\end{DoxyCode}
