\doxysection{E\+:/\+One\+Drive -\/ The University of Nottingham/\+Year 5 Shared/\+FYP/\+Code/\+Uo\+NCube\+Sat/lib/obc/scheduler/scheduler.h File Reference}
\hypertarget{scheduler_8h}{}\label{scheduler_8h}\index{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/obc/scheduler/scheduler.h@{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/obc/scheduler/scheduler.h}}
{\ttfamily \#include $<$stdi\+O.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include "{}../../utils/win/timer/timer.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_scheduler___task}{Scheduler\+\_\+\+Task}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{scheduler_8h_af12cab9399b7b23dbe9fe6037e633cc8}{SCHEDULER\+\_\+\+MAX\+\_\+\+TASKS}}~16
\item 
\Hypertarget{scheduler_8h_aa362df2cf466b2acdc2560008020b7c6}\label{scheduler_8h_aa362df2cf466b2acdc2560008020b7c6} 
\#define {\bfseries SCHEDULER\+\_\+\+NO\+\_\+\+ID}~-\/1
\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{scheduler_8h_a55e34f20306567f79ae783ffb69b25d2}\label{scheduler_8h_a55e34f20306567f79ae783ffb69b25d2} 
typedef void(\texorpdfstring{$\ast$}{*} {\bfseries Scheduler\+\_\+\+Callback}) (void)
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{scheduler_8h_ac1d998d93a30cb542fe1bb188d26de76}\label{scheduler_8h_ac1d998d93a30cb542fe1bb188d26de76} 
enum {\bfseries SCHEDULER\+\_\+\+RTNS} \{ \newline
{\bfseries SCHEDULER\+\_\+\+OK}
, {\bfseries SCHEDULER\+\_\+\+INIT\+\_\+\+FAIL}
, {\bfseries SCHEDULER\+\_\+\+SLOT\+\_\+\+NOT\+\_\+\+FREE}
, {\bfseries SCHEDULER\+\_\+\+FULL}
, \newline
{\bfseries SCHEDULER\+\_\+\+TASK\+\_\+\+DONE}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
\Hypertarget{scheduler_8h_abc674601c38810d5e5f2f03b01e4a0a7}\label{scheduler_8h_abc674601c38810d5e5f2f03b01e4a0a7} 
SCHEDULER\+\_\+\+RTNS {\bfseries Scheduler\+\_\+\+Init} (void)
\item 
void \mbox{\hyperlink{scheduler_8h_a2c2e498c775215590824ee65dc262388}{Scheduler\+\_\+\+Tick}} (void)
\item 
void \mbox{\hyperlink{scheduler_8h_aabb59a7cfd11cb63ab1ac4c125ae965f}{Scheduler\+\_\+\+Get\+Tasks}} (bool \texorpdfstring{$\ast$}{*}\+\_\+statuses, uint32\+\_\+t \texorpdfstring{$\ast$}{*}\+\_\+times)
\item 
uint8\+\_\+t \mbox{\hyperlink{scheduler_8h_a05218ede79e5adaaf6e840546b8bbf51}{Scheduler\+\_\+\+Rtn\+Check}} (SCHEDULER\+\_\+\+RTNS return\+Code, const char \texorpdfstring{$\ast$}{*}func, const char \texorpdfstring{$\ast$}{*}caller)
\item 
\Hypertarget{scheduler_8h_a08f21e326ecbdbe776dd8b2dfd138117}\label{scheduler_8h_a08f21e326ecbdbe776dd8b2dfd138117} 
SCHEDULER\+\_\+\+RTNS {\bfseries Scheduler\+\_\+\+Add\+Task} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}task\+ID, void(\texorpdfstring{$\ast$}{*}callback)(void), uint32\+\_\+t seconds)
\item 
SCHEDULER\+\_\+\+RTNS \mbox{\hyperlink{scheduler_8h_afab88b4a2186727cc4068678c4321ac9}{Scheduler\+\_\+\+Add\+Cyclic\+Task}} (uint8\+\_\+t \texorpdfstring{$\ast$}{*}task\+ID, void(\texorpdfstring{$\ast$}{*}callback)(void), uint32\+\_\+t seconds)
\item 
SCHEDULER\+\_\+\+RTNS \mbox{\hyperlink{scheduler_8h_a84a6889906d14db9d44a45f35c4bf9fb}{Scheduler\+\_\+\+Remove\+Task}} (uint8\+\_\+t task\+ID)
\item 
SCHEDULER\+\_\+\+RTNS \mbox{\hyperlink{scheduler_8h_ae44417ddb28b7bd45c8c50672ffd4211}{Scheduler\+\_\+\+Remove\+All\+Task}} (void)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
N. Lok 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
08/\+March/2024 
\end{DoxyDate}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{scheduler_8h_af12cab9399b7b23dbe9fe6037e633cc8}\label{scheduler_8h_af12cab9399b7b23dbe9fe6037e633cc8} 
\index{scheduler.h@{scheduler.h}!SCHEDULER\_MAX\_TASKS@{SCHEDULER\_MAX\_TASKS}}
\index{SCHEDULER\_MAX\_TASKS@{SCHEDULER\_MAX\_TASKS}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{SCHEDULER\_MAX\_TASKS}{SCHEDULER\_MAX\_TASKS}}
{\footnotesize\ttfamily \#define SCHEDULER\+\_\+\+MAX\+\_\+\+TASKS~16}

Standard Libs Additional Libs 

\doxysubsection{Function Documentation}
\Hypertarget{scheduler_8h_afab88b4a2186727cc4068678c4321ac9}\label{scheduler_8h_afab88b4a2186727cc4068678c4321ac9} 
\index{scheduler.h@{scheduler.h}!Scheduler\_AddCyclicTask@{Scheduler\_AddCyclicTask}}
\index{Scheduler\_AddCyclicTask@{Scheduler\_AddCyclicTask}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_AddCyclicTask()}{Scheduler\_AddCyclicTask()}}
{\footnotesize\ttfamily SCHEDULER\+\_\+\+RTNS Scheduler\+\_\+\+Add\+Cyclic\+Task (\begin{DoxyParamCaption}\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{task\+ID,  }\item[{void(\texorpdfstring{$\ast$}{*})(void)}]{callback,  }\item[{uint32\+\_\+t}]{seconds }\end{DoxyParamCaption})}

Initialise task object with cycle time

Call add task helper\Hypertarget{scheduler_8h_aabb59a7cfd11cb63ab1ac4c125ae965f}\label{scheduler_8h_aabb59a7cfd11cb63ab1ac4c125ae965f} 
\index{scheduler.h@{scheduler.h}!Scheduler\_GetTasks@{Scheduler\_GetTasks}}
\index{Scheduler\_GetTasks@{Scheduler\_GetTasks}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_GetTasks()}{Scheduler\_GetTasks()}}
{\footnotesize\ttfamily void Scheduler\+\_\+\+Get\+Tasks (\begin{DoxyParamCaption}\item[{bool \texorpdfstring{$\ast$}{*}}]{\+\_\+statuses,  }\item[{uint32\+\_\+t \texorpdfstring{$\ast$}{*}}]{\+\_\+times }\end{DoxyParamCaption})}

Loop through all tasks

Store status and remaining times\Hypertarget{scheduler_8h_ae44417ddb28b7bd45c8c50672ffd4211}\label{scheduler_8h_ae44417ddb28b7bd45c8c50672ffd4211} 
\index{scheduler.h@{scheduler.h}!Scheduler\_RemoveAllTask@{Scheduler\_RemoveAllTask}}
\index{Scheduler\_RemoveAllTask@{Scheduler\_RemoveAllTask}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_RemoveAllTask()}{Scheduler\_RemoveAllTask()}}
{\footnotesize\ttfamily SCHEDULER\+\_\+\+RTNS Scheduler\+\_\+\+Remove\+All\+Task (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Initialise var

Loop through all tasks

Checks if task has been triggered

Deactivate task

If no tasks triggered while removing, all ok, else not fully clean remove\Hypertarget{scheduler_8h_a84a6889906d14db9d44a45f35c4bf9fb}\label{scheduler_8h_a84a6889906d14db9d44a45f35c4bf9fb} 
\index{scheduler.h@{scheduler.h}!Scheduler\_RemoveTask@{Scheduler\_RemoveTask}}
\index{Scheduler\_RemoveTask@{Scheduler\_RemoveTask}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_RemoveTask()}{Scheduler\_RemoveTask()}}
{\footnotesize\ttfamily SCHEDULER\+\_\+\+RTNS Scheduler\+\_\+\+Remove\+Task (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{task\+ID }\end{DoxyParamCaption})}

Initialise var

Checks if task has been triggered

Deactivate task

If task didn\textquotesingle{}t triggered while removing, all ok, else not fully clean remove\Hypertarget{scheduler_8h_a05218ede79e5adaaf6e840546b8bbf51}\label{scheduler_8h_a05218ede79e5adaaf6e840546b8bbf51} 
\index{scheduler.h@{scheduler.h}!Scheduler\_RtnCheck@{Scheduler\_RtnCheck}}
\index{Scheduler\_RtnCheck@{Scheduler\_RtnCheck}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_RtnCheck()}{Scheduler\_RtnCheck()}}
{\footnotesize\ttfamily uint8\+\_\+t Scheduler\+\_\+\+Rtn\+Check (\begin{DoxyParamCaption}\item[{SCHEDULER\+\_\+\+RTNS}]{return\+Code,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{func,  }\item[{const char \texorpdfstring{$\ast$}{*}}]{caller }\end{DoxyParamCaption})}

Check return code

Print Error Message\Hypertarget{scheduler_8h_a2c2e498c775215590824ee65dc262388}\label{scheduler_8h_a2c2e498c775215590824ee65dc262388} 
\index{scheduler.h@{scheduler.h}!Scheduler\_Tick@{Scheduler\_Tick}}
\index{Scheduler\_Tick@{Scheduler\_Tick}!scheduler.h@{scheduler.h}}
\doxysubsubsection{\texorpdfstring{Scheduler\_Tick()}{Scheduler\_Tick()}}
{\footnotesize\ttfamily void Scheduler\+\_\+\+Tick (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}

Loop through all tasks

Decrement task timer and check if task timer elapsed

Call function for scheduled task

Reset task timer, if task is cyclic, else deactivate task