\doxysection{E\+:/\+One\+Drive -\/ The University of Nottingham/\+Year 5 Shared/\+FYP/\+Code/\+Uo\+NCube\+Sat/lib/ttc/twsg/\+TWSG.h File Reference}
\hypertarget{_t_w_s_g_8h}{}\label{_t_w_s_g_8h}\index{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/ttc/twsg/TWSG.h@{E:/OneDrive -\/ The University of Nottingham/Year 5 Shared/FYP/Code/UoNCubeSat/lib/ttc/twsg/TWSG.h}}
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include "{}../../ttc/li2/\+Li2.\+h"{}}\newline
{\ttfamily \#include "{}../../obc/transfer\+\_\+buff/transfer\+\_\+buff.\+h"{}}\newline
{\ttfamily \#include "{}../../obc/config/config\+\_\+structs.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{struct_t_w_s_g___raw___packet}{TWSG\+\_\+\+Raw\+\_\+\+Packet}}
\item 
struct \mbox{\hyperlink{struct_t_w_s_g___a_p_i_d}{TWSG\+\_\+\+APID}}
\item 
struct \mbox{\hyperlink{struct_t_w_s_g___pri___header}{TWSG\+\_\+\+Pri\+\_\+\+Header}}
\item 
struct \mbox{\hyperlink{struct_t_w_s_g___sec___header}{TWSG\+\_\+\+Sec\+\_\+\+Header}}
\item 
struct \mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}}
\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{_t_w_s_g_8h_a9262d41374f5a774d1a3bc8d39c694e6}{TWSG\+\_\+\+MAX\+\_\+\+PACKET\+\_\+\+LEN}}~255
\item 
\Hypertarget{_t_w_s_g_8h_a1f0327ae93c4b3e8424b617866350861}\label{_t_w_s_g_8h_a1f0327ae93c4b3e8424b617866350861} 
\#define {\bfseries TWSG\+\_\+\+PRI\+\_\+\+HDR\+\_\+\+LEN}~2
\item 
\Hypertarget{_t_w_s_g_8h_ad623b0126892535809e650f4bf80a193}\label{_t_w_s_g_8h_ad623b0126892535809e650f4bf80a193} 
\#define {\bfseries TWSG\+\_\+\+SEC\+\_\+\+HDR\+\_\+\+LEN}~3
\item 
\Hypertarget{_t_w_s_g_8h_a6fd613434f0e481aadaa5e53089ce67c}\label{_t_w_s_g_8h_a6fd613434f0e481aadaa5e53089ce67c} 
\#define {\bfseries TWSG\+\_\+\+MAX\+\_\+\+PAYLOAD\+\_\+\+SEC\+\_\+\+LEN}~250
\item 
\Hypertarget{_t_w_s_g_8h_a08eac568350cc004b24a46cf6f9d6440}\label{_t_w_s_g_8h_a08eac568350cc004b24a46cf6f9d6440} 
\#define {\bfseries TWSG\+\_\+\+MAX\+\_\+\+PAYLOAD\+\_\+\+NO\+\_\+\+SEC\+\_\+\+LEN}~253
\item 
\Hypertarget{_t_w_s_g_8h_a2a3f62e95b477f1fca062343bf0cd3bb}\label{_t_w_s_g_8h_a2a3f62e95b477f1fca062343bf0cd3bb} 
\#define {\bfseries TWSG\+\_\+\+WAIT\+\_\+\+TIMEOUT}~10000
\item 
\Hypertarget{_t_w_s_g_8h_abbbb335ab8cf7de1dea0f9c58013c854}\label{_t_w_s_g_8h_abbbb335ab8cf7de1dea0f9c58013c854} 
\#define {\bfseries TWSG\+\_\+\+NO\+\_\+\+PACKET\+\_\+\+SUB\+\_\+\+NAME}~0
\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646}{TWSG\+\_\+\+PACKET\+\_\+\+TYPE}} \{ {\bfseries TWSG\+\_\+\+TELECMD}
, \mbox{\hyperlink{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646a9fd77b949e3450b3cb42af4ba975064f}{TWSG\+\_\+\+TELEMETRY}}
 \}
\item 
\Hypertarget{_t_w_s_g_8h_a105a0eb9d7dadfac9fb83e30df52e475}\label{_t_w_s_g_8h_a105a0eb9d7dadfac9fb83e30df52e475} 
enum {\bfseries TWSG\+\_\+\+SEC\+\_\+\+HDR\+\_\+\+FLAG} \{ {\bfseries TWSG\+\_\+\+NO\+\_\+\+SEC\+\_\+\+HDR}
, {\bfseries TWSG\+\_\+\+SEC\+\_\+\+HDR}
 \}
\item 
\Hypertarget{_t_w_s_g_8h_a6c710376bff3d55c0d9988856ba93241}\label{_t_w_s_g_8h_a6c710376bff3d55c0d9988856ba93241} 
enum {\bfseries TWSG\+\_\+\+ACK\+\_\+\+FLAG} \{ {\bfseries TWSG\+\_\+\+NACK}
, {\bfseries TWSG\+\_\+\+ACK}
 \}
\item 
enum \mbox{\hyperlink{_t_w_s_g_8h_af3991ba896efd3e21957001d2a1a9ab1}{TWSG\+\_\+\+SUB\+\_\+\+SYS\+\_\+\+ID}} \{ \newline
{\bfseries TWSG\+\_\+\+OBC\+\_\+\+ID}
, {\bfseries TWSG\+\_\+\+LI2\+\_\+\+ID}
, {\bfseries TWSG\+\_\+\+ADCS\+\_\+\+ID}
, {\bfseries TWSG\+\_\+\+EPS\+\_\+\+ID}
, \newline
{\bfseries TWSG\+\_\+\+GNSS\+\_\+\+ID}
, {\bfseries TWSG\+\_\+\+SBAND\+\_\+\+ID}
, {\bfseries TWSG\+\_\+\+SOLAR\+\_\+\+ID}
 \}
\item 
enum \mbox{\hyperlink{_t_w_s_g_8h_a8c18ff69a41bd800aa7af1bf7174e027}{TWSG\+\_\+\+SEG}} \{ {\bfseries TWSG\+\_\+\+SEG\+\_\+\+GROUND}
, {\bfseries TWSG\+\_\+\+SEG\+\_\+\+SPACE}
 \}
\item 
\Hypertarget{_t_w_s_g_8h_a2cb962a4a5ce43d7c18ccbda5ece2e12}\label{_t_w_s_g_8h_a2cb962a4a5ce43d7c18ccbda5ece2e12} 
enum {\bfseries TWSG\+\_\+\+SEQ\+\_\+\+SEG\+\_\+\+FLAG} \{ {\bfseries TWSG\+\_\+\+CONTINUE\+\_\+\+FLAG}
, {\bfseries TWSG\+\_\+\+START\+\_\+\+FLAG}
, {\bfseries TWSG\+\_\+\+END\+\_\+\+FLAG}
, {\bfseries TWSG\+\_\+\+NO\+\_\+\+SEG\+\_\+\+FLAG}
 \}
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int8\+\_\+t \mbox{\hyperlink{_t_w_s_g_8h_abb3099ac6967bd2de0e9052105edbf64}{TWSG\+\_\+\+Init}} (\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}Comms, \mbox{\hyperlink{struct_config}{Config}} \mbox{\hyperlink{struct_config}{Config}}, \mbox{\hyperlink{struct_transfer___buff}{Transfer\+\_\+\+Buff}} \texorpdfstring{$\ast$}{*}Transfer\+Buff)
\item 
int8\+\_\+t \mbox{\hyperlink{_t_w_s_g_8h_a0af04684690a3bf7fff4197fc52ec1fe}{TWSG\+\_\+\+Wait\+For\+Packet}} (\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}\+\_\+\+Comms, uint8\+\_\+t \+\_\+filter\+Packet)
\item 
\Hypertarget{_t_w_s_g_8h_aec3426542fb9dd0dc22d15022df42275}\label{_t_w_s_g_8h_aec3426542fb9dd0dc22d15022df42275} 
void {\bfseries TWSG\+\_\+\+Set\+Pri\+Header} (\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}\+\_\+\+Comms, uint8\+\_\+t \texorpdfstring{$\ast$}{*}\+\_\+buffer, \mbox{\hyperlink{_t_w_s_g_8h_af3991ba896efd3e21957001d2a1a9ab1}{TWSG\+\_\+\+SUB\+\_\+\+SYS\+\_\+\+ID}} \+\_\+sub\+Sys\+ID, \mbox{\hyperlink{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646}{TWSG\+\_\+\+PACKET\+\_\+\+TYPE}} \+\_\+packet\+Type, TWSG\+\_\+\+SEC\+\_\+\+HDR\+\_\+\+FLAG \+\_\+sec\+Flag, uint8\+\_\+t \+\_\+packet\+Name, uint8\+\_\+t \+\_\+packet\+Sub\+Name)
\item 
int8\+\_\+t \mbox{\hyperlink{_t_w_s_g_8h_aae748e2057ac083e9b35385255274b13}{TWSG\+\_\+\+Read\+Pri\+Header}} (\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}\+\_\+\+Comms, uint8\+\_\+t \texorpdfstring{$\ast$}{*}\+\_\+buffer, \mbox{\hyperlink{struct_t_w_s_g___pri___header}{TWSG\+\_\+\+Pri\+\_\+\+Header}} \texorpdfstring{$\ast$}{*}\+\_\+\+Pri\+Header)
\item 
int8\+\_\+t \mbox{\hyperlink{_t_w_s_g_8h_aa6b6c1534c6b920f78f5654d4799668f}{TWSG\+\_\+\+Read\+Sec\+Header}} (\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}\+\_\+\+Comms, uint8\+\_\+t \texorpdfstring{$\ast$}{*}\+\_\+buffer, \mbox{\hyperlink{struct_t_w_s_g___sec___header}{TWSG\+\_\+\+Sec\+\_\+\+Header}} \texorpdfstring{$\ast$}{*}\+\_\+\+Sec\+Header)
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
\begin{DoxyAuthor}{Author}
N. Lok 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
08/\+March/2024 
\end{DoxyDate}


\doxysubsection{Macro Definition Documentation}
\Hypertarget{_t_w_s_g_8h_a9262d41374f5a774d1a3bc8d39c694e6}\label{_t_w_s_g_8h_a9262d41374f5a774d1a3bc8d39c694e6} 
\index{TWSG.h@{TWSG.h}!TWSG\_MAX\_PACKET\_LEN@{TWSG\_MAX\_PACKET\_LEN}}
\index{TWSG\_MAX\_PACKET\_LEN@{TWSG\_MAX\_PACKET\_LEN}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_MAX\_PACKET\_LEN}{TWSG\_MAX\_PACKET\_LEN}}
{\footnotesize\ttfamily \#define TWSG\+\_\+\+MAX\+\_\+\+PACKET\+\_\+\+LEN~255}

Standard Libs Additional Libs 

\doxysubsection{Enumeration Type Documentation}
\Hypertarget{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646}\label{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646} 
\index{TWSG.h@{TWSG.h}!TWSG\_PACKET\_TYPE@{TWSG\_PACKET\_TYPE}}
\index{TWSG\_PACKET\_TYPE@{TWSG\_PACKET\_TYPE}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_PACKET\_TYPE}{TWSG\_PACKET\_TYPE}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646}{TWSG\+\_\+\+PACKET\+\_\+\+TYPE}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{TWSG\_TELEMETRY@{TWSG\_TELEMETRY}!TWSG.h@{TWSG.h}}\index{TWSG.h@{TWSG.h}!TWSG\_TELEMETRY@{TWSG\_TELEMETRY}}}\Hypertarget{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646a9fd77b949e3450b3cb42af4ba975064f}\label{_t_w_s_g_8h_a72eac75065aff36e48c59c70f4a7e646a9fd77b949e3450b3cb42af4ba975064f} 
TWSG\+\_\+\+TELEMETRY&Telecmd ~\newline
 Telemetry \\
\hline

\end{DoxyEnumFields}
\Hypertarget{_t_w_s_g_8h_a8c18ff69a41bd800aa7af1bf7174e027}\label{_t_w_s_g_8h_a8c18ff69a41bd800aa7af1bf7174e027} 
\index{TWSG.h@{TWSG.h}!TWSG\_SEG@{TWSG\_SEG}}
\index{TWSG\_SEG@{TWSG\_SEG}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_SEG}{TWSG\_SEG}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{_t_w_s_g_8h_a8c18ff69a41bd800aa7af1bf7174e027}{TWSG\+\_\+\+SEG}}}

Segement Enum \Hypertarget{_t_w_s_g_8h_af3991ba896efd3e21957001d2a1a9ab1}\label{_t_w_s_g_8h_af3991ba896efd3e21957001d2a1a9ab1} 
\index{TWSG.h@{TWSG.h}!TWSG\_SUB\_SYS\_ID@{TWSG\_SUB\_SYS\_ID}}
\index{TWSG\_SUB\_SYS\_ID@{TWSG\_SUB\_SYS\_ID}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_SUB\_SYS\_ID}{TWSG\_SUB\_SYS\_ID}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{_t_w_s_g_8h_af3991ba896efd3e21957001d2a1a9ab1}{TWSG\+\_\+\+SUB\+\_\+\+SYS\+\_\+\+ID}}}

Sub-\/\+Systems 

\doxysubsection{Function Documentation}
\Hypertarget{_t_w_s_g_8h_abb3099ac6967bd2de0e9052105edbf64}\label{_t_w_s_g_8h_abb3099ac6967bd2de0e9052105edbf64} 
\index{TWSG.h@{TWSG.h}!TWSG\_Init@{TWSG\_Init}}
\index{TWSG\_Init@{TWSG\_Init}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_Init()}{TWSG\_Init()}}
{\footnotesize\ttfamily int8\+\_\+t TWSG\+\_\+\+Init (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}}]{Comms,  }\item[{\mbox{\hyperlink{struct_config}{Config}}}]{Config,  }\item[{\mbox{\hyperlink{struct_transfer___buff}{Transfer\+\_\+\+Buff}} \texorpdfstring{$\ast$}{*}}]{Transfer\+Buff }\end{DoxyParamCaption})}

Debug

All good\Hypertarget{_t_w_s_g_8h_aae748e2057ac083e9b35385255274b13}\label{_t_w_s_g_8h_aae748e2057ac083e9b35385255274b13} 
\index{TWSG.h@{TWSG.h}!TWSG\_ReadPriHeader@{TWSG\_ReadPriHeader}}
\index{TWSG\_ReadPriHeader@{TWSG\_ReadPriHeader}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_ReadPriHeader()}{TWSG\_ReadPriHeader()}}
{\footnotesize\ttfamily int8\+\_\+t TWSG\+\_\+\+Read\+Pri\+Header (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}}]{\+\_\+\+Comms,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{\+\_\+buffer,  }\item[{\mbox{\hyperlink{struct_t_w_s_g___pri___header}{TWSG\+\_\+\+Pri\+\_\+\+Header}} \texorpdfstring{$\ast$}{*}}]{\+\_\+\+Pri\+Header }\end{DoxyParamCaption})}

All Good\Hypertarget{_t_w_s_g_8h_aa6b6c1534c6b920f78f5654d4799668f}\label{_t_w_s_g_8h_aa6b6c1534c6b920f78f5654d4799668f} 
\index{TWSG.h@{TWSG.h}!TWSG\_ReadSecHeader@{TWSG\_ReadSecHeader}}
\index{TWSG\_ReadSecHeader@{TWSG\_ReadSecHeader}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_ReadSecHeader()}{TWSG\_ReadSecHeader()}}
{\footnotesize\ttfamily int8\+\_\+t TWSG\+\_\+\+Read\+Sec\+Header (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}}]{\+\_\+\+Comms,  }\item[{uint8\+\_\+t \texorpdfstring{$\ast$}{*}}]{\+\_\+buffer,  }\item[{\mbox{\hyperlink{struct_t_w_s_g___sec___header}{TWSG\+\_\+\+Sec\+\_\+\+Header}} \texorpdfstring{$\ast$}{*}}]{\+\_\+\+Sec\+Header }\end{DoxyParamCaption})}

Extract 2 bits (bit 7 and 6)

All Good\Hypertarget{_t_w_s_g_8h_a0af04684690a3bf7fff4197fc52ec1fe}\label{_t_w_s_g_8h_a0af04684690a3bf7fff4197fc52ec1fe} 
\index{TWSG.h@{TWSG.h}!TWSG\_WaitForPacket@{TWSG\_WaitForPacket}}
\index{TWSG\_WaitForPacket@{TWSG\_WaitForPacket}!TWSG.h@{TWSG.h}}
\doxysubsubsection{\texorpdfstring{TWSG\_WaitForPacket()}{TWSG\_WaitForPacket()}}
{\footnotesize\ttfamily int8\+\_\+t TWSG\+\_\+\+Wait\+For\+Packet (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{struct_t_w_s_g___comms___system}{TWSG\+\_\+\+Comms\+\_\+\+System}} \texorpdfstring{$\ast$}{*}}]{\+\_\+\+Comms,  }\item[{uint8\+\_\+t}]{\+\_\+filter\+Packet }\end{DoxyParamCaption})}

Check if timed out

Debug

Check for LI2 data receive command

All Good